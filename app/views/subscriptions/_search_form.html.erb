<div class="filter-and-search-container mb-6">

  <%= form_with url: subscriptions_path, method: :get, local: true, class: "flex flex-wrap items-end gap-4 p-4 bg-gray-50 border rounded-lg" do %>

    <div class="flex-grow">
      <label for="q" class="text-sm font-medium text-gray-700">搜索 (产品/用户邮件)</label>
      <%= text_field_tag :q, params[:q], placeholder: "搜索产品或用户邮件...", class: "w-full border p-2 rounded mt-1" %>
    </div>

    <div>
      <label for="status" class="text-sm font-medium text-gray-700">筛选状态</label>
      <%= select_tag :status,
                     options_for_select(
                       [
                         ['所有状态', ''],
                         ['活动中 (Active)', 'active'],
                         ['已取消 (Cancelled)', 'cancelled'],
                         ['已完成 (Fulfilled)', 'fulfilled']
                       ],
                       params[:status]
                     ),
                     {
                       class: "border p-2 rounded mt-1"
                     }
      %>
    </div>

    <div class="flex space-x-2">
      <%= submit_tag "筛选/搜索", name: nil, class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded self-end" %>

      <% if params[:q].present? || params[:status].present? %>
        <%= link_to "清除", subscriptions_path, class: "text-red-500 hover:text-red-700 self-end p-2" %>
      <% end %>
    </div>

  <% end %>
</div>